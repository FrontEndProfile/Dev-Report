
<html><head><base href="https://websim.dev/developer_daily_report/">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Developer Daily Report</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #f0f0f0;
        margin: 0;
        padding: 20px;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
      }
      .container {
        background-color: white;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        width: 100%;
        max-width: 500px;
      }
      h1 {
        text-align: center;
        color: #333;
      }
      form {
        display: flex;
        flex-direction: column;
      }
      label {
        margin-top: 10px;
        font-weight: bold;
      }
      input, select, textarea {
        width: 100%;
        padding: 8px;
        margin-top: 5px;
        border: 1px solid #ddd;
        border-radius: 4px;
        box-sizing: border-box;
      }
      button {
        background-color: #4CAF50;
        color: white;
        padding: 10px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        margin-top: 20px;
      }
      button:hover {
        background-color: #45a049;
      }
    </style>
    </head>
    <body>
      <div class="container">
        <h1>Developer Daily Report</h1>
        <form id="reportForm">
          <label for="task">Task:</label>
          <textarea id="task" name="task" rows="3" required></textarea>
          
          <label for="category">Category:</label>
          <select id="category" name="category" required>
            <option value="">Select a category</option>
            <option value="Bug">Bug</option>
            <option value="R&D">R&D</option>
            <option value="Feature">Feature</option>
          </select>
          
          <label for="date">Date:</label>
          <input type="date" id="date" name="date" required>
          
          <label for="hours">Hours Spent:</label>
          <input type="number" id="hours" name="hours" min="0" step="0.5" required>
          
          <button type="submit">Submit Report</button>
        </form>
      </div>
    
      <script src="https://apis.google.com/js/api.js"></script>
      <script>
        // Your client ID and API key from the Developer Console
        const CLIENT_ID = 'YOUR_CLIENT_ID';
        const API_KEY = 'YOUR_API_KEY';
    
        // Array of API discovery doc URLs for APIs used by the quickstart
        const DISCOVERY_DOCS = ["https://sheets.googleapis.com/$discovery/rest?version=v4"];
    
        // Authorization scopes required by the API
        const SCOPES = "https://www.googleapis.com/auth/spreadsheets";
    
        let authorizeButton = document.createElement('button');
        authorizeButton.style.display = 'none';
        authorizeButton.textContent = 'Authorize';
        document.body.appendChild(authorizeButton);
    
        let signoutButton = document.createElement('button');
        signoutButton.style.display = 'none';
        signoutButton.textContent = 'Sign Out';
        document.body.appendChild(signoutButton);
    
        function handleClientLoad() {
          gapi.load('client:auth2', initClient);
        }
    
        function initClient() {
          gapi.client.init({
            apiKey: API_KEY,
            clientId: CLIENT_ID,
            discoveryDocs: DISCOVERY_DOCS,
            scope: SCOPES
          }).then(function () {
            // Listen for sign-in state changes.
            gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);
    
            // Handle the initial sign-in state.
            updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
            authorizeButton.onclick = handleAuthClick;
            signoutButton.onclick = handleSignoutClick;
          }, function(error) {
            console.error('Error initializing Google API:', error);
          });
        }
    
        function updateSigninStatus(isSignedIn) {
          if (isSignedIn) {
            authorizeButton.style.display = 'none';
            signoutButton.style.display = 'block';
          } else {
            authorizeButton.style.display = 'block';
            signoutButton.style.display = 'none';
          }
        }
    
        function handleAuthClick(event) {
          gapi.auth2.getAuthInstance().signIn();
        }
    
        function handleSignoutClick(event) {
          gapi.auth2.getAuthInstance().signOut();
        }
    
        document.getElementById('reportForm').addEventListener('submit', function(event) {
          event.preventDefault();
          if (!gapi.auth2.getAuthInstance().isSignedIn.get()) {
            alert('Please authorize the application to submit reports.');
            return;
          }
          submitReport();
        });
    
        function submitReport() {
          const task = document.getElementById('task').value;
          const category = document.getElementById('category').value;
          const date = document.getElementById('date').value;
          const hours = document.getElementById('hours').value;
    
          const formattedDate = new Date(date).toLocaleDateString('en-US', {
            year: 'numeric',
            month: '2-digit',
            day: '2-digit'
          });
    
          const values = [
            ['', task, category, formattedDate, hours]
          ];
    
          gapi.client.sheets.spreadsheets.values.append({
            spreadsheetId: '1jbBSwireFHWEqeW2XLnW2PSHVytISaX5C-8-O1TdD7M',
            range: 'Sheet1!A:E',
            valueInputOption: 'USER_ENTERED',
            resource: { values: values }
          }).then(function(response) {
            console.log('Report submitted:', response);
            alert('Report submitted successfully!');
            document.getElementById('reportForm').reset();
          }, function(error) {
            console.error('Error submitting report:', error);
            alert('Error submitting report. Please try again.');
          });
        }
    
        handleClientLoad();
      </script>
    </body>
    </html>